# 鼓棒校準測量數據

## 📅 測量日期
2025-12-02

## 📐 測量環境
- **感測器**: MPU6050
- **安裝方式**: X 軸沿著鼓棒長度方向
- **頁面**: calibration.html (固定相機視角)

---

## 🎯 標準姿態測量數據

### 1. 水平指向前（標準零點） ✅
```
Roll:   -4.2°
Pitch: -84.8°
Yaw:     7.2°
```
**說明**: 鼓棒水平，尖端朝向前方（+Z 方向）

**校準偏移計算**:
```javascript
rotationOffset = {
    roll:   4.2,   // 反向偏移
    pitch: 84.8,   // 反向偏移  
    yaw:   -7.2    // 反向偏移
};
```

---

### 2. 水平指向左
```
Roll:    3.1°
Pitch: -84.8°
Yaw:    15.3°
```
**說明**: 鼓棒水平，尖端朝向左側（-X 方向）

**特徵**:
- Pitch 保持 -84.8°（水平不變）
- Yaw 增加到 15.3°（向左旋轉約 +8.1°）

---

### 3. 水平指向右
```
Roll:   -1.5°
Pitch: -84.8°
Yaw:    -0.3°
```
**說明**: 鼓棒水平，尖端朝向右側（+X 方向）

**特徵**:
- Pitch 保持 -84.8°（水平不變）
- Yaw 減少到 -0.3°（向右旋轉約 -7.5°）

---

### 4. 置中，鼓棒尖端上翹
```
Roll:    3.1°
Pitch: -61.7°
Yaw:    14.1°
```
**說明**: 鼓棒尖端向上抬起約 23°

**特徵**:
- Pitch 從 -84.8° 增加到 -61.7°（差值 +23.1°）
- 表示鼓棒尖端上揚

---

### 5. 置中，鼓棒尖端下壓
```
Roll:  -14.4°
Pitch: -73.7°
Yaw:    14.3°
```
**說明**: 鼓棒尖端向下壓約 11°

**特徵**:
- Pitch 從 -84.8° 減少到 -73.7°（差值 +11.1°）
- 表示鼓棒尖端下壓

---

## 📊 數據分析

### Pitch 值特徵
| 姿態 | Pitch | 相對水平 | 物理意義 |
|------|-------|---------|---------|
| 水平（前/左/右）| -84.8° | 0° | 鼓棒完全水平 |
| 尖端上翹 | -61.7° | +23.1° | 向上抬起 |
| 尖端下壓 | -73.7° | +11.1° | 向下壓 |

**結論**: Pitch 值越大（接近 0°），鼓棒尖端越往上

### Roll 值變化範圍
- **最小值**: -14.4°（尖端下壓時）
- **最大值**: 3.1°（指向左 / 尖端上翹時）
- **範圍**: 17.5°
- **特徵**: 變化不大，主要反映細微的橫滾調整

### Yaw 值變化範圍
- **最小值**: -0.3°（指向右時）
- **最大值**: 15.3°（指向左時）
- **範圍**: 15.6°
- **特徵**: 
  - 指向前: 7.2°（中間值）
  - 指向左: 15.3°（+8.1°）
  - 指向右: -0.3°（-7.5°）

---

## 🔧 校準建議

### 方案 A: 使用「水平指向前」作為零點（推薦） ✅

**優點**:
- 符合直覺的「中立姿態」
- Pitch ≈ -85° 容易識別
- 作為遊戲初始姿態最自然

**校準方式**:
1. 點擊「📏 預設：水平指向前」按鈕
2. 系統自動套用偏移: roll=4.2, pitch=84.8, yaw=-7.2

**效果**:
- 水平指向前 → (0°, 0°, 0°)
- 尖端上翹 → (7.3°, 23.1°, 6.9°)
- 尖端下壓 → (-18.6°, 11.1°, 7.1°)

---

### 方案 B: 使用「自動校準」即時設定

**優點**:
- 每次使用都能精確校準
- 不依賴預設值
- 適應感測器漂移

**校準方式**:
1. 將鼓棒擺到理想的初始位置
2. 點擊「🎯 自動校準」
3. 系統記錄當前數值作為零點

---

## 🎮 遊戲應用建議

### 打擊偵測
根據數據，建議使用 **Pitch 變化** 來偵測打擊動作：

```javascript
// 偵測上下揮動
const pitchChange = Math.abs(currentPitch - lastPitch);

if (pitchChange > 10) {  // 閾值 10°
    // 偵測到揮棒動作
    if (currentPitch > lastPitch) {
        console.log('向上揮動');
    } else {
        console.log('向下揮動');
    }
}
```

### 方向判斷
使用 **Yaw 值** 來判斷左右方向：

```javascript
// 根據測量數據
if (yaw > 10) {
    console.log('指向左側');
} else if (yaw < 2) {
    console.log('指向右側');
} else {
    console.log('指向前方');
}
```

---

## 📝 注意事項

### 1. Pitch 接近 -90° 的原因
MPU6050 的 X 軸沿著鼓棒長度，當鼓棒水平時：
- Z 軸朝下（重力方向）
- Pitch = arctan2(-Z, sqrt(X² + Y²)) ≈ -90°

### 2. 數據一致性
所有「水平」姿態的 Pitch 都是 -84.8°，說明：
✅ 測量穩定
✅ 感測器安裝正確
✅ 校準數據可靠

### 3. 溫度影響
建議在相同溫度下進行校準和使用，避免溫漂影響。

---

## 🚀 快速開始

### 使用預設校準
1. 打開 `http://<IP>:5000/calibration`
2. 點擊「📏 預設：水平指向前」
3. 開始使用！

### 使用自動校準
1. 將鼓棒擺成你想要的初始姿態
2. 點擊「🎯 自動校準」
3. 系統記錄當前姿態為零點

### 微調
- 使用旋轉偏移滑桿進行細微調整
- 勾選「軸反轉」來改變移動方向
- 點擊「💾 儲存設定」保存配置

---

**版本**: 1.0  
**測量者**: Eleanor  
**專案**: IOT_drum_stick
